{"ast":null,"code":"export class ClaudeApiService {\n  constructor() {\n    this.apiKey = void 0;\n    this.baseUrl = 'https://api.anthropic.com/v1/messages';\n    this.apiKey = process.env.REACT_APP_CLAUDE_API_KEY || '';\n    if (!this.apiKey) {\n      console.warn('Claude API key not found. Set REACT_APP_CLAUDE_API_KEY environment variable.');\n    }\n  }\n  async analyzeTeam(team, allTeams, leagueName, currentWeek) {\n    if (!this.apiKey) {\n      throw new Error('Claude API key not configured');\n    }\n    const leagueContext = this.buildLeagueContext(allTeams, leagueName, currentWeek);\n    const teamContext = this.buildTeamContext(team, allTeams);\n    const prompt = `Analyze this fantasy football team in the context of their league:\n\n${leagueContext}\n\nFocus on: ${team.display_name}\nRecord: ${team.wins}-${team.losses}\nPoints For: ${team.points_for.toFixed(1)}\nLeague Rank: ${team.rank} out of ${allTeams.length}\n\n${teamContext}\n\nPlease provide a comprehensive analysis in the following JSON format:\n{\n  \"strengths\": [\"strength1\", \"strength2\", \"strength3\"],\n  \"weaknesses\": [\"weakness1\", \"weakness2\", \"weakness3\"],\n  \"advice\": \"Specific actionable advice for this week and upcoming games\",\n  \"outlook\": \"Rest of season outlook and playoff chances\"\n}\n\nKeep each point concise (1-2 sentences max). Focus on fantasy football strategy, not real NFL analysis.`;\n    try {\n      var _data$content$;\n      const response = await fetch(this.baseUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.apiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify({\n          model: 'claude-3-sonnet-20240229',\n          max_tokens: 1000,\n          messages: [{\n            role: 'user',\n            content: prompt\n          }]\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Claude API error: ${response.status}`);\n      }\n      const data = await response.json();\n      const analysisText = ((_data$content$ = data.content[0]) === null || _data$content$ === void 0 ? void 0 : _data$content$.text) || '';\n\n      // Parse the JSON response from Claude\n      const jsonMatch = analysisText.match(/\\{[\\s\\S]*\\}/);\n      if (!jsonMatch) {\n        throw new Error('Invalid response format from Claude API');\n      }\n      const analysisData = JSON.parse(jsonMatch[0]);\n      return {\n        teamName: team.display_name,\n        record: `${team.wins}-${team.losses}`,\n        strengths: analysisData.strengths || [],\n        weaknesses: analysisData.weaknesses || [],\n        advice: analysisData.advice || 'No specific advice available.',\n        outlook: analysisData.outlook || 'Outlook not available.'\n      };\n    } catch (error) {\n      console.error('Claude API error:', error);\n\n      // Fallback analysis if API fails\n      return this.getFallbackAnalysis(team, allTeams);\n    }\n  }\n  buildLeagueContext(teams, leagueName, currentWeek) {\n    const topTeams = teams.slice(0, 3);\n    const bottomTeams = teams.slice(-3);\n    return `League: ${leagueName}\nCurrent Week: ${currentWeek}\nLeague Size: ${teams.length} teams\n\nTop 3 Teams:\n${topTeams.map(t => `${t.rank}. ${t.display_name} (${t.wins}-${t.losses}, ${t.points_for.toFixed(1)} PF)`).join('\\n')}\n\nBottom 3 Teams:\n${bottomTeams.map(t => `${t.rank}. ${t.display_name} (${t.wins}-${t.losses}, ${t.points_for.toFixed(1)} PF)`).join('\\n')}`;\n  }\n  buildTeamContext(team, allTeams) {\n    const avgPoints = allTeams.reduce((sum, t) => sum + t.points_for, 0) / allTeams.length;\n    const avgPointsAgainst = allTeams.reduce((sum, t) => sum + t.points_against, 0) / allTeams.length;\n    return `Team Performance vs League Average:\nPoints For: ${team.points_for.toFixed(1)} (league avg: ${avgPoints.toFixed(1)})\nPoints Against: ${team.points_against.toFixed(1)} (league avg: ${avgPointsAgainst.toFixed(1)})\nPoint Differential: ${(team.points_for - team.points_against).toFixed(1)}`;\n  }\n  getFallbackAnalysis(team, allTeams) {\n    const avgPoints = allTeams.reduce((sum, t) => sum + t.points_for, 0) / allTeams.length;\n    const isTopHalf = team.rank <= Math.ceil(allTeams.length / 2);\n    const highScoring = team.points_for > avgPoints;\n    let strengths = [];\n    let weaknesses = [];\n    let advice = '';\n    let outlook = '';\n    if (highScoring) {\n      strengths.push('Strong offensive production');\n      strengths.push('Consistently high scoring potential');\n    } else {\n      weaknesses.push('Below average scoring output');\n      weaknesses.push('Need to improve roster productivity');\n    }\n    if (isTopHalf) {\n      strengths.push('Currently in playoff contention');\n      outlook = 'Good position for playoff push with consistent performance.';\n    } else {\n      weaknesses.push('Currently outside playoff picture');\n      outlook = 'Need strong finish to make playoffs. Focus on high-upside plays.';\n    }\n    advice = highScoring ? 'Maintain consistent lineup choices and avoid risky plays.' : 'Look for waiver wire pickups and consider bold lineup moves.';\n    return {\n      teamName: team.display_name,\n      record: `${team.wins}-${team.losses}`,\n      strengths,\n      weaknesses,\n      advice,\n      outlook\n    };\n  }\n}\nexport const claudeApi = new ClaudeApiService();","map":{"version":3,"names":["ClaudeApiService","constructor","apiKey","baseUrl","process","env","REACT_APP_CLAUDE_API_KEY","console","warn","analyzeTeam","team","allTeams","leagueName","currentWeek","Error","leagueContext","buildLeagueContext","teamContext","buildTeamContext","prompt","display_name","wins","losses","points_for","toFixed","rank","length","_data$content$","response","fetch","method","headers","body","JSON","stringify","model","max_tokens","messages","role","content","ok","status","data","json","analysisText","text","jsonMatch","match","analysisData","parse","teamName","record","strengths","weaknesses","advice","outlook","error","getFallbackAnalysis","teams","topTeams","slice","bottomTeams","map","t","join","avgPoints","reduce","sum","avgPointsAgainst","points_against","isTopHalf","Math","ceil","highScoring","push","claudeApi"],"sources":["/Users/roshikdatla/Documents/Amberwood-Football-League/fantasy-football-dashboard/src/services/claudeApi.ts"],"sourcesContent":["import { TeamStanding } from '../types/sleeper';\n\ninterface ClaudeApiResponse {\n  content: Array<{\n    text: string;\n  }>;\n}\n\ninterface TeamAnalysis {\n  teamName: string;\n  record: string;\n  strengths: string[];\n  weaknesses: string[];\n  advice: string;\n  outlook: string;\n}\n\nexport class ClaudeApiService {\n  private apiKey: string;\n  private baseUrl = 'https://api.anthropic.com/v1/messages';\n\n  constructor() {\n    this.apiKey = process.env.REACT_APP_CLAUDE_API_KEY || '';\n    if (!this.apiKey) {\n      console.warn('Claude API key not found. Set REACT_APP_CLAUDE_API_KEY environment variable.');\n    }\n  }\n\n  async analyzeTeam(\n    team: TeamStanding, \n    allTeams: TeamStanding[], \n    leagueName: string,\n    currentWeek: number\n  ): Promise<TeamAnalysis> {\n    if (!this.apiKey) {\n      throw new Error('Claude API key not configured');\n    }\n\n    const leagueContext = this.buildLeagueContext(allTeams, leagueName, currentWeek);\n    const teamContext = this.buildTeamContext(team, allTeams);\n    \n    const prompt = `Analyze this fantasy football team in the context of their league:\n\n${leagueContext}\n\nFocus on: ${team.display_name}\nRecord: ${team.wins}-${team.losses}\nPoints For: ${team.points_for.toFixed(1)}\nLeague Rank: ${team.rank} out of ${allTeams.length}\n\n${teamContext}\n\nPlease provide a comprehensive analysis in the following JSON format:\n{\n  \"strengths\": [\"strength1\", \"strength2\", \"strength3\"],\n  \"weaknesses\": [\"weakness1\", \"weakness2\", \"weakness3\"],\n  \"advice\": \"Specific actionable advice for this week and upcoming games\",\n  \"outlook\": \"Rest of season outlook and playoff chances\"\n}\n\nKeep each point concise (1-2 sentences max). Focus on fantasy football strategy, not real NFL analysis.`;\n\n    try {\n      const response = await fetch(this.baseUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.apiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify({\n          model: 'claude-3-sonnet-20240229',\n          max_tokens: 1000,\n          messages: [\n            {\n              role: 'user',\n              content: prompt\n            }\n          ]\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Claude API error: ${response.status}`);\n      }\n\n      const data: ClaudeApiResponse = await response.json();\n      const analysisText = data.content[0]?.text || '';\n      \n      // Parse the JSON response from Claude\n      const jsonMatch = analysisText.match(/\\{[\\s\\S]*\\}/);\n      if (!jsonMatch) {\n        throw new Error('Invalid response format from Claude API');\n      }\n\n      const analysisData = JSON.parse(jsonMatch[0]);\n      \n      return {\n        teamName: team.display_name,\n        record: `${team.wins}-${team.losses}`,\n        strengths: analysisData.strengths || [],\n        weaknesses: analysisData.weaknesses || [],\n        advice: analysisData.advice || 'No specific advice available.',\n        outlook: analysisData.outlook || 'Outlook not available.'\n      };\n\n    } catch (error) {\n      console.error('Claude API error:', error);\n      \n      // Fallback analysis if API fails\n      return this.getFallbackAnalysis(team, allTeams);\n    }\n  }\n\n  private buildLeagueContext(teams: TeamStanding[], leagueName: string, currentWeek: number): string {\n    const topTeams = teams.slice(0, 3);\n    const bottomTeams = teams.slice(-3);\n    \n    return `League: ${leagueName}\nCurrent Week: ${currentWeek}\nLeague Size: ${teams.length} teams\n\nTop 3 Teams:\n${topTeams.map(t => `${t.rank}. ${t.display_name} (${t.wins}-${t.losses}, ${t.points_for.toFixed(1)} PF)`).join('\\n')}\n\nBottom 3 Teams:\n${bottomTeams.map(t => `${t.rank}. ${t.display_name} (${t.wins}-${t.losses}, ${t.points_for.toFixed(1)} PF)`).join('\\n')}`;\n  }\n\n  private buildTeamContext(team: TeamStanding, allTeams: TeamStanding[]): string {\n    const avgPoints = allTeams.reduce((sum, t) => sum + t.points_for, 0) / allTeams.length;\n    const avgPointsAgainst = allTeams.reduce((sum, t) => sum + t.points_against, 0) / allTeams.length;\n    \n    return `Team Performance vs League Average:\nPoints For: ${team.points_for.toFixed(1)} (league avg: ${avgPoints.toFixed(1)})\nPoints Against: ${team.points_against.toFixed(1)} (league avg: ${avgPointsAgainst.toFixed(1)})\nPoint Differential: ${(team.points_for - team.points_against).toFixed(1)}`;\n  }\n\n  private getFallbackAnalysis(team: TeamStanding, allTeams: TeamStanding[]): TeamAnalysis {\n    const avgPoints = allTeams.reduce((sum, t) => sum + t.points_for, 0) / allTeams.length;\n    const isTopHalf = team.rank <= Math.ceil(allTeams.length / 2);\n    const highScoring = team.points_for > avgPoints;\n    \n    let strengths = [];\n    let weaknesses = [];\n    let advice = '';\n    let outlook = '';\n\n    if (highScoring) {\n      strengths.push('Strong offensive production');\n      strengths.push('Consistently high scoring potential');\n    } else {\n      weaknesses.push('Below average scoring output');\n      weaknesses.push('Need to improve roster productivity');\n    }\n\n    if (isTopHalf) {\n      strengths.push('Currently in playoff contention');\n      outlook = 'Good position for playoff push with consistent performance.';\n    } else {\n      weaknesses.push('Currently outside playoff picture');\n      outlook = 'Need strong finish to make playoffs. Focus on high-upside plays.';\n    }\n\n    advice = highScoring \n      ? 'Maintain consistent lineup choices and avoid risky plays.'\n      : 'Look for waiver wire pickups and consider bold lineup moves.';\n\n    return {\n      teamName: team.display_name,\n      record: `${team.wins}-${team.losses}`,\n      strengths,\n      weaknesses,\n      advice,\n      outlook\n    };\n  }\n}\n\nexport const claudeApi = new ClaudeApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}